<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style1.css">
</head>
<body onload="move()">
    <div id="preloader">
        <div id="percent">
            1%
        </div>
        <div id="bar">
            <div id="barconfirm"></div>
        </div>
    </div>
    
    <div class="img">
        <h1>Text Reveal Animation</h1>
    </div>
    <Hr class="hr">
    <div class="container">
        <div class="text">
            <p>Surprising</p>
            <p>and playful ways</p>
            <p>to tell a story!</p>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/gsap.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.2/ScrollTrigger.min.js"></script>
    <script>
       
        gsap.to(".text p", {
            backgroundPositionX: "0%",
            color: "yellow",
            stagger: 1,
            scrollTrigger: {
                trigger: ".text p",
                scrub: 3,
                start: "top center",
                end: "bottom top"
            }
        })
        gsap.to(".hr", {
            width: "100%",
            scrollTrigger: {
                trigger: ".hr",
                scrub: 1,
                start: "top center",
                end: "bottom top"
            }
        })

    const tl = gsap.timeline({paused: "true"})
    tl.to('#percent, #bar', {
        duration: .2,
        opacity: 0,
        zIndex: -1
    });
    tl.to("#preloader", {
        duration: .8,
        width: "0%"
    })
    tl.to('body', {
        duration: .1,
        overflow: "auto"
    })

    let width = 1;
    var bar = document.querySelector("#barconfirm")
    let id;
    function move(){
        id = setInterval(frame, 10);
    }
    function frame(){
        if(width >= 100){
            clearInterval(id);
            tl.play();
        }else{
            width++;
            bar.style.width = width + '%';
            document.querySelector('#percent').innerHTML = width + '%';
        }
    }
    </script>
</body>
</html>